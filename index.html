<!DOCTYPE html>
<html>
<head>
    <title>TalkSpace</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        input { padding: 10px; margin: 5px; }
        button { padding: 10px; margin: 5px; }
    </style>
</head>
<body>
    <h1>üí¨ TalkSpace Test</h1>
    
    <input type="text" id="usernameInput" placeholder="–ò–º—è">
    <input type="password" id="passwordInput" placeholder="–ü–∞—Ä–æ–ª—å">
    <button onclick="register()">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
    <button onclick="login()">–í—Ö–æ–¥</button>
    
    <div id="status" style="margin-top: 20px;"></div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        let socket = io();
        
        // –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
        socket.on('connect', () => {
            console.log('‚úÖ Connected to server');
            showStatus('‚úÖ Connected to server', 'green');
        });
        
        socket.on('disconnect', () => {
            console.log('‚ùå Disconnected from server');
            showStatus('‚ùå Disconnected from server', 'red');
        });

        function register() {
            const username = document.getElementById('usernameInput').value;
            const password = document.getElementById('passwordInput').value;
            console.log('Sending register:', username);
            socket.emit('register', { username, password });
        }

        function login() {
            const username = document.getElementById('usernameInput').value;
            const password = document.getElementById('passwordInput').value;
            console.log('Sending login:', username);
            socket.emit('login', { username, password });
        }

        socket.on('register_success', (data) => {
            console.log('Register success:', data);
            showStatus('‚úÖ Registration successful! User: ' + data.user.username, 'green');
        });

        socket.on('login_success', (data) => {
            console.log('Login success:', data);
            showStatus('‚úÖ Login successful! User: ' + data.user.username, 'green');
        });

        function showStatus(message, color) {
            const status = document.getElementById('status');
            status.innerHTML = message;
            status.style.color = color;
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ socket.io
        console.log('Socket.io script loaded:', typeof io !== 'undefined');
    </script>
</body>
</html>
